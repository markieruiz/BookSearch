# Guide to deploying mern stack with MongoLab and Heroku
This guide assumes you already have...
- The Heroku cli installed globally
- A Heroku account
- Your Heroku accout has payment information setup.
- Your MERN application has a git or github associated with it.
- Your MERN application runs as expected on a local development Environment.
- Your development and deployment environmental configuration is setup.
  - If you're using the exercise from week-20: `11-Stu_ReactRouter/solved` the configuration will be complete.
  - See **Starting with Source Code** below for github setup if you have this code but have yet to setup and github repository.

ðŸš¨ WARNING: In order for the deployment process to run as expected, doing these steps out of order could cause some unexpected issues. So, please take note of the order of events.

### Test Locally
First, make sure you've navigated / ($`cd`) within the root level of your project and tested it at that location: $`npm start`. Then, exit out of your local server `control+c`.

### Update Git / Github
Make sure your project's master branch is up-to-date.
- Additionally, make sure you're on your master branch during deployment.

### Create a new Heroku application
- $`heroku create` > autogenerated heroku app name.
- OR: $`heroku create <name_of_app>` > Example: $`heroku create coolApp`
- If successful, you should see that heroku gave you both an autogenerated app name if you didn't add one along with the link to that project.
- Here's an example output, your name may be different.

`Creating app... done, â¬¢ young-sierra-19251` OR: `coolApp`

`https://young-sierra-19251.herokuapp.com/ | https://git.heroku.com/young-sierra-19251.git`

- Copy the first link into a new browser window to see where your deployed app will end up. There should be some "place holder" at this point letting you know it's been set up.

### Your project on Heroku.com
Now, got to heroku.com and log into your account(not required)
- Within your accounts apps you should now see a newly created application associated with your project.  
- NOTE: this step is just here to show you where your project lives on heroku.com

### Add mLabs (MongoDB)
`heroku addons:create mongolab -a <name-of-heroku-app>`
- My example: `heroku addons:create mongolab -a young-sierra-19251`

### deploy
Now run the command &`git push heroku master`
- The deployment may take a few minutes as it is configured.
- Once complete visit the project link provided to you from before.

ðŸ˜ƒ That's it! Enjoy your fully deployed full-stack application live on the Internet!

### Making changes (Re-deploy)

Redeploy is now simple! Just make sure your up to date on your master branch and have tested your code locally, then...
- $`git push heroku master`

----
### Starting with Source Code

Project Source Code: `11-Stu_ReactRouter/Solved`

Start by creating a new github repository on github.com
- $`git clone <your_repo_link_here>`
- Copy entire **contents** in the `Solved` folder into your newly cloned repository.

Create a .gitignore at the root level and add the following code
```
./node_modules
node_modules
```

Test the application
- `npm install`
- `npm run seed`
- `npm start` > See that your application is working in the browser.
- "command+c" to break out of your local server

Update any changes (IMPORTANT)
- `git add . `
- `git commit -m 'updating changes'`
- `git push`
- Add, commit and push any changes

At this point you may have created multiple branches on a development team. However, you'll need to make sure you're on you `master` branch while testing. And, this is where you'll want to be as heroku will deploy from this branch. So, make sure you're up to date on your master branch.
- $`git branch` > should be master
- $`git pull` > Should be up to date

----
# References / Resources:
- https://coursework.vschool.io/deploying-mern-with-heroku/
- https://docs.mlab.com/
- https://devcenter.heroku.com/articles/mongolab
- https://daveceddia.com/deploy-react-express-app-heroku/

---
